<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Building Editable Lists with Dialog</title>
	<link href="http://code.jquery.com/ui/jquery-ui-git.css" rel="stylesheet">

	<style>
		.ui-dialog p { display: none; }
		.ui-dialog.admin p { display: block; }
		.ui-dialog.admin form { display: none; }
		.ui-dialog.admin button:first-child { display: none; }

		table { border-collapse: collapse; width: 100%; }
		th {
			border-bottom: 2px solid black;
		}
		td, th {
			padding: 1em 2em;
			text-align: left;
		}
		table tr:nth-child(even) {
			background: #eee;
		}
	</style>
</head>
<body>

<table>
	<thead>
		<tr>
			<th>Id</th>
			<th>First Name</th>
			<th>Last Name</th>
			<th>Admin</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>1</td>
			<td>TJ</td>
			<td>VanToll</td>
			<td>Yes</td>
			<td>
				<button>Edit</button>
			</td>
		</tr>
		<tr>
			<td>2</td>
			<td>Santa</td>
			<td>Claus</td>
			<td>No</td>
			<td>
				<button>Edit</button>
			</td>
		</tr>
		<tr>
			<td>3</td>
			<td>Easter</td>
			<td>Bunny</td>
			<td>No</td>
			<td>
				<button>Edit</button>
			</td>
		</tr>
		<tr>
			<td>4</td>
			<td>Tooth</td>
			<td>Fairy</td>
			<td>No</td>
			<td>
				<button>Edit</button>
			</td>
		</tr>
		<tr>
			<td>5</td>
			<td>Chuck</td>
			<td>Norris</td>
			<td>Yes</td>
			<td>
				<button>Edit</button>
			</td>
		</tr>
	</tbody>
</table>

<div id="dialog">
	<form>
		<div>
			<label for="firstName">First Name:</label>
			<input type="text" id="firstName">
		</div>
		<div>
			<label for="lastName">Last Name:</label>
			<input type="text" id="lastName">
		</div>
	</form>
	<p>Administrators cannot be edited.</p>
</div>

<script src="http://code.jquery.com/jquery-git.js"></script>
<script src="http://code.jquery.com/ui/jquery-ui-git.js"></script>

<script>
	$( "#dialog" ).dialog({
		autoOpen: false,
		buttons: {
			Update: function() {
				var firstName = $( "#firstName" ).val(),
					lastName = $( "#lastName" ).val(),
					row = $( this ).data( "editingRow" );

				row.find( "td" ).eq( 1 ).text( firstName );
				row.find( "td" ).eq( 2 ).text( lastName );
				$( this ).dialog( "close" );
			},
			Cancel: function() {
				$( this ).dialog( "close" );
			}
		}
	});

	$( "table" ).on( "click", "button", function() {
		var row = $( this ).parents( "tr" ),
			firstName = row.find( "td" ).eq( 1 ).text(),
			lastName = row.find( "td" ).eq( 2 ).text(),
			admin = row.find( "td" ).eq( 3 ).text() === "Yes";
		
		$( "#firstName" ).val( firstName );
		$( "#lastName" ).val( lastName );

		$( "#dialog" )
			.dialog( "option", {
				title: "Editing " + firstName + " " + lastName,
				dialogClass: admin ? "admin" : ""
			})
			.data( "editingRow", row )
			.dialog( "open" ); 
	});
</script>

</body>
</html>